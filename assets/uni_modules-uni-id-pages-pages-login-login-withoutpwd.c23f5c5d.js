import{_ as e,V as i,au as s,av as n,G as o,p as t,o as a,c as l,w as u,f as p,d as r,e as d,a as c,F as g,D as m,i as h,a4 as f,q as y,v as b}from"./index-6d8df4d2.js";import{_}from"./uni-id-pages-agreements.20f1e757.js";import{_ as k}from"./uni-easyinput.b407beea.js";import{_ as w}from"./uni-id-pages-fab-login.85861022.js";import{m as x}from"./login-page.mixin.9bb84df6.js";import"./uni-popup-dialog.aa82751c.js";import"./uni-popup.4ce3ad51.js";import"./store.682ebf55.js";const L=e({mixins:[x],data:()=>({type:"",phone:"",focusPhone:!1,logo:"/static/logo.png"}),computed:{loginTypes:async()=>i.loginTypes,isPhone(){return/^1\d{10}$/.test(this.phone)},imgSrc(){return"weixin"==this.type?"/uni_modules/uni-id-pages/static/login/weixin.png":"/uni_modules/uni-id-pages/static/app-plus/apple.png"}},async onLoad(e){let n=e.type||i.loginTypes[0];this.type=n,"univerify"!=n&&(this.focusPhone=!0),this.$nextTick((()=>{["weixin","apple"].includes(n)&&(this.$refs.uniFabLogin.servicesList=this.$refs.uniFabLogin.servicesList.filter((e=>e.id!=n)))})),s("uni-id-pages-setLoginType",(e=>{this.type=e}))},onShow(){document.onkeydown=e=>{var i=e||window.event;i&&13==i.keyCode&&this.toSmsPage()}},onUnload(){n("uni-id-pages-setLoginType")},onReady(){},methods:{showCurrentWebview(){undefined.setStyle({top:0})},quickLogin(e){var i,s;let n={};(null==(i=e.detail)?void 0:i.code)&&(n.phoneNumberCode=e.detail.code),("weixinMobile"!==this.type||(null==(s=e.detail)?void 0:s.code))&&this.$refs.uniFabLogin.login_before(this.type,!0,n)},toSmsPage(){return this.isPhone?this.needAgreements&&!this.agree?this.$refs.agreements.popup(this.toSmsPage):void t({url:"/uni_modules/uni-id-pages/pages/login/login-smscode?phoneNumber="+this.phone}):(this.focusPhone=!0,o({title:"手机号码格式不正确",icon:"none",duration:3e3}))},toPwdLogin(){t({url:"../login/password"})},chooseArea(){o({title:"暂不支持其他国家",icon:"none",duration:3e3})}}},[["render",function(e,i,s,n,o,t){const x=m,L=p,P=h,v=f,C=y(b("uni-id-pages-agreements"),_),j=y(b("uni-easyinput"),k),S=y(b("uni-id-pages-fab-login"),w);return a(),l(L,{class:"uni-content"},{default:u((()=>[r(L,{class:"login-logo"},{default:u((()=>[r(x,{src:o.logo},null,8,["src"])])),_:1}),r(P,{class:"title"},{default:u((()=>[d("请选择登录方式")])),_:1}),["apple","weixin","weixinMobile"].includes(o.type)?(a(),c(g,{key:0},[r(P,{class:"tip"},{default:u((()=>[d("将根据第三方账号服务平台的授权范围获取你的信息")])),_:1}),r(L,{class:"quickLogin"},{default:u((()=>["weixinMobile"!==o.type?(a(),l(x,{key:0,onClick:t.quickLogin,src:t.imgSrc,mode:"widthFix",class:"quickLoginBtn"},null,8,["onClick","src"])):(a(),l(v,{key:1,type:"primary","open-type":"getPhoneNumber",onGetphonenumber:t.quickLogin,class:"uni-btn"},{default:u((()=>[d("微信授权手机号登录")])),_:1},8,["onGetphonenumber"])),r(C,{scope:"register",ref:"agreements"},null,512)])),_:1})],64)):(a(),c(g,{key:1},[r(P,{class:"tip"},{default:u((()=>[d("未注册的账号验证通过后将自动注册")])),_:1}),r(L,{class:"phone-box"},{default:u((()=>[r(L,{onClick:t.chooseArea,class:"area"},{default:u((()=>[d("+86")])),_:1},8,["onClick"]),r(j,{focus:o.focusPhone,onBlur:i[0]||(i[0]=e=>o.focusPhone=!1),class:"input-box",type:"number",inputBorder:!1,modelValue:o.phone,"onUpdate:modelValue":i[1]||(i[1]=e=>o.phone=e),maxlength:"11",placeholder:"请输入手机号"},null,8,["focus","modelValue"])])),_:1}),r(C,{scope:"register",ref:"agreements"},null,512),r(v,{class:"uni-btn",type:"primary",onClick:t.toSmsPage},{default:u((()=>[d("获取验证码")])),_:1},8,["onClick"])],64)),r(S,{ref:"uniFabLogin"},null,512)])),_:1})}],["__scopeId","data-v-e394d6b8"]]);export{L as default};
