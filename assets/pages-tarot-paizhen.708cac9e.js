import{_ as e,z as a,A as t,g as l,ay as s,ai as r,az as i,o as n,a as o,B as u,F as d,r as c,n as v,b as _,t as p,C as y,s as g,p as f,l as b,aA as k,c as m,w as h,f as x,d as D,I as q}from"./index-6d8df4d2.js";import{n as C,r as w}from"./CommonUtil.43a90802.js";const X=e({__name:"plateWidget",props:{tarotData:{type:Object,default:()=>({})}},emits:["nextStep"],setup(e,{emit:k}){const m=e,h=a(78),x=a([]),D=a(180);var q=null;const X=a([]),I=a(!1),$=a({startX:0,startY:0,moveX:0,moveY:0}),A=a("stop"),Y=a(null),z=a([]),R=a([]),S=a(!1),T=a([]),L=a({isAllowClick:!0,requestData:[]}),E=a([]),B=a([]),j=a([]),U=a([]),Z=a([]),N=a({b_pageX:0,b_pageY:0,pageX:0,pageY:0}),O=a({x:0,y:0});function F(e){g("tarotDetail",L.value.requestData[e]),f({url:"/pages/tarot/detail"})}function G(e){$.value.moveX=e.touches[0].pageX,$.value.moveY=e.touches[0].pageY,e.preventDefault(),$.value.moveX-$.value.startX>1?A.value="right":$.value.moveX-$.value.startX<-1?A.value="left":A.value="stop"}function P(e){$.value.startX=e.touches[0].pageX,$.value.startY=e.touches[0].pageY}function W(e){A.value="stop"}function H(e){if(console.log(e),!L.value.isAllowClick)return;if(X.value.length>=m.tarotData.keyArr.length)return;if(x.value[e].isEmpty)return;I.value=!0,L.value.isAllowClick=!1,X.value.push(e),x.value[e].isEmpty=!0;let a=X.value.length-1;var t;i().select("#card"+a).boundingClientRect((e=>{N.value.pageX=N.value.b_pageX-e.left,N.value.pageY=N.value.b_pageY-e.top})).exec(),function(){let e=l("allTarots");if(console.log(e),e&&e.length>0){e=e.filter((e=>!T.value.includes(e.name)));let a=e[w(0,e.length-1)];a.direction=w(0,1),a.directionStr=b().globalData.$t("app.zhengwei"),1==a.direction&&(a.directionStr=b().globalData.$t("app.niwei")),L.value.requestData.push(a),T.value.push(a.name)}}(),t=N.value,setTimeout((()=>{O.value.x=-t.pageX,O.value.y=-t.pageY}),2100),setTimeout((()=>{R.value.push(X.value.length),O.value.x=0,O.value.y=0,I.value=!1,L.value.isAllowClick=!0}),2500)}return t((()=>{let e=l("CURRENT_LANG");m.tarotData.keyArr=m.tarotData.keywords.split(","),console.log(m.tarotData.keyArr);for(let a=0;a<m.tarotData.keyArr.length;a++){let t={};t.text=C(a+1,e),t.index=a+1,t.type=a+1,t.key=m.tarotData.keyArr[a],a<3?E.value.push(t):a<6?B.value.push(t):a<9?j.value.push(t):a<12?U.value.push(t):a<15&&Z.value.push(t)}})),s(A,((e,a)=>{switch(e){case"left":clearInterval(q),q=setInterval((()=>{D.value--}),100);break;case"right":clearInterval(q),q=setInterval((()=>{D.value++}),100);break;case"stop":clearInterval(q)}})),r((()=>{!function(){for(let e=0;e<h.value;e++)x.value.push({angle:360/h.value*e,isEmpty:!1})}();i().select("#copyBoxDom").boundingClientRect((e=>{N.value.b_pageX=e.left,N.value.b_pageY=e.top})).exec(),setTimeout((()=>{S.value=!0}),1e3)})),(e,a)=>(n(),o(d,null,[u("div",{class:"card_plate",onTouchmove:G,onTouchstart:P,onTouchend:W,style:_({transform:`translateX(-50%) rotateZ(${D.value}deg)`})},[(n(!0),o(d,null,c(x.value,((e,a)=>(n(),o("div",{class:v(["card",{"animate__animated animate__fadeOutUp":e.isEmpty}]),key:a,onClick:e=>H(a),style:_({bottom:""+(S.value?"-7.625rem":"-20.625rem"),transform:`translate(-50%) rotateZ(${e.angle}deg)`,transition:`all ${e.angle/200}s ease-in-out`})},[u("div",{class:"card_box",style:{boxShadow:"none"}},[u("div",{class:v(["card_front",{card_front_isClick:e.isEmpty}])},null,2),u("div",{class:"card_back"})])],14,["onClick"])))),128))],36),u("div",{class:"copy_box",style:_({transform:`translate(${O.value.x}px,${O.value.y}px)`})},[u("div",{class:v(["card_copy",{fadeInDown_animate:I.value}]),id:"copyBoxDom",ref_key:"copyBoxDom",ref:Y,style:_({opacity:I.value?1:0})},[u("div",{class:"card_box"},[u("div",{class:"card_front"}),u("div",{class:"card_back"})])],6)],4),u("div",{class:"tit_text animate__animated animate__fadeInLeft"},p(e.$t("app.chouqu")),1),u("div",{class:"tarot_select_list animate__animated animate__fadeInRight"},[(n(!0),o(d,null,c(E.value,((e,a)=>{var t,l;return n(),o("div",{class:"tarot_select_item",key:a,id:"card"+a,ref_for:!0,ref_key:"domList",ref:z,style:_(R.value[a]==e.index?"filter: brightness(100%);":"filter: brightness(72%);")},[u("div",{class:"tarot_select_bg",style:_(R.value[a]==e.index?"box-shadow: 0 0 14px #f5d382;":"box-shadow: none;")},[u("span",{class:"tarot_select_text"},p(e.text),1)],4),u("div",{class:"card_overlay",style:_(R.value[a]==e.index?"display: block;":"display: none;")},[u("div",{class:v(["card_box",X.value.length>=a?"rotateCard":""])},[u("div",{class:"card_front"}),L.value.requestData[a]?(n(),o("div",{key:0,class:v(["card_back",0==L.value.requestData[a].direction?"rotateCard1":""]),onClick:e=>F(a),style:_(L.value.requestData[a]?`background:url(${L.value.requestData[a].image}) no-repeat;background-size: 100% 100%;`:"")},null,14,["onClick"])):y("",!0)],2)],4),R.value[a]==e.index?(n(),o("div",{key:0,class:"bot_line"},p(null==(t=L.value.requestData[a])?void 0:t.name)+"·"+p(null==(l=L.value.requestData[a])?void 0:l.directionStr),1)):y("",!0),u("div",{class:"top_line"},p(e.key),1)],12,["id"])})),128))]),u("div",{class:"tarot_select_list2 animate__animated animate__fadeInRight"},[(n(!0),o(d,null,c(B.value,((e,a)=>{var t,l;return n(),o("div",{class:"tarot_select_item",key:a,id:"card"+(a+3),ref_for:!0,ref_key:"domList",ref:z,style:_(R.value[a+3]==e.index?"filter: brightness(100%);":"filter: brightness(72%);")},[u("div",{class:"tarot_select_bg",style:_(R.value[a+3]==e.index?"box-shadow: 0 0 14px #f5d382;":"box-shadow: none;")},[u("span",{class:"tarot_select_text"},p(e.text),1)],4),u("div",{class:"card_overlay",style:_(R.value[a+3]==e.index?"display: block;":"display: none;")},[u("div",{class:v(["card_box",X.value.length>=a+3?"rotateCard":""])},[u("div",{class:"card_front"}),L.value.requestData[a+3]?(n(),o("div",{key:0,class:v(["card_back",0==L.value.requestData[a+3].direction?"rotateCard1":""]),onClick:e=>F(a+3),style:_(L.value.requestData[a+3]?`background:url(${L.value.requestData[a+3].image}) no-repeat;background-size: 100% 100%;`:"")},null,14,["onClick"])):y("",!0)],2)],4),R.value[a+3]==e.index?(n(),o("div",{key:0,class:"bot_line"},p(null==(t=L.value.requestData[a+3])?void 0:t.name)+"·"+p(null==(l=L.value.requestData[a+3])?void 0:l.directionStr),1)):y("",!0),u("div",{class:"top_line"},p(e.key),1)],12,["id"])})),128))]),u("div",{class:"tarot_select_list3 animate__animated animate__fadeInRight",style:{"background-color":""}},[(n(!0),o(d,null,c(j.value,((e,a)=>{var t,l;return n(),o("div",{class:"tarot_select_item",key:a,id:"card"+(a+6),ref_for:!0,ref_key:"domList",ref:z,style:_(R.value[a+6]==e.index?"filter: brightness(100%);":"filter: brightness(72%);")},[u("div",{class:"tarot_select_bg",style:_(R.value[a+6]==e.index?"box-shadow: 0 0 14px #f5d382;":"box-shadow: none;")},[u("span",{class:"tarot_select_text"},p(e.text),1)],4),u("div",{class:"card_overlay",style:_(R.value[a+6]==e.index?"display: block;":"display: none;")},[u("div",{class:v(["card_box",X.value.length>=a+6?"rotateCard":""])},[u("div",{class:"card_front"}),L.value.requestData[a+6]?(n(),o("div",{key:0,class:v(["card_back",0==L.value.requestData[a+6].direction?"rotateCard1":""]),onClick:e=>F(a+6),style:_(L.value.requestData[a+6]?`background:url(${L.value.requestData[a+6].image}) no-repeat;background-size: 100% 100%;`:"")},null,14,["onClick"])):y("",!0)],2)],4),R.value[a+6]==e.index?(n(),o("div",{key:0,class:"bot_line"},p(null==(t=L.value.requestData[a+6])?void 0:t.name)+"·"+p(null==(l=L.value.requestData[a+6])?void 0:l.directionStr),1)):y("",!0),u("div",{class:"top_line"},p(e.key),1)],12,["id"])})),128))]),u("div",{class:"tarot_select_list4 animate__animated animate__fadeInRight"},[(n(!0),o(d,null,c(U.value,((e,a)=>{var t,l;return n(),o("div",{class:"tarot_select_item",key:a,id:"card"+(a+9),ref_for:!0,ref_key:"domList",ref:z,style:_(R.value[a+9]==e.index?"filter: brightness(100%);":"filter: brightness(72%);")},[u("div",{class:"tarot_select_bg",style:_(R.value[a+9]==e.index?"box-shadow: 0 0 14px #f5d382;":"box-shadow: none;")},[u("span",{class:"tarot_select_text"},p(e.text),1)],4),u("div",{class:"card_overlay",style:_(R.value[a+9]==e.index?"display: block;":"display: none;")},[u("div",{class:v(["card_box",X.value.length>=a+9?"rotateCard":""])},[u("div",{class:"card_front"}),L.value.requestData[a+9]?(n(),o("div",{key:0,class:v(["card_back",0==L.value.requestData[a+9].direction?"rotateCard1":""]),onClick:e=>F(a+9),style:_(L.value.requestData[a+9]?`background:url(${L.value.requestData[a+9].image}) no-repeat;background-size: 100% 100%;`:"")},null,14,["onClick"])):y("",!0)],2)],4),R.value[a+9]==e.index?(n(),o("div",{key:0,class:"bot_line"},p(null==(t=L.value.requestData[a+9])?void 0:t.name)+"·"+p(null==(l=L.value.requestData[a+9])?void 0:l.directionStr),1)):y("",!0),u("div",{class:"top_line"},p(e.key),1)],12,["id"])})),128))]),u("div",{class:"tarot_select_list5 animate__animated animate__fadeInRight"},[(n(!0),o(d,null,c(Z.value,((e,a)=>{var t,l;return n(),o("div",{class:"tarot_select_item",key:a,id:"card"+(a+12),ref_for:!0,ref_key:"domList",ref:z,style:_(R.value[a+12]==e.index?"filter: brightness(100%);":"filter: brightness(72%);")},[u("div",{class:"tarot_select_bg",style:_(R.value[a+12]==e.index?"box-shadow: 0 0 14px #f5d382;":"box-shadow: none;")},[u("span",{class:"tarot_select_text"},p(e.text),1)],4),u("div",{class:"card_overlay",style:_(R.value[a+12]==e.index?"display: block;":"display: none;")},[u("div",{class:v(["card_box",X.value.length>=a+12?"rotateCard":""])},[u("div",{class:"card_front"}),L.value.requestData[a+12]?(n(),o("div",{key:0,class:v(["card_back",0==L.value.requestData[a+12].direction?"rotateCard1":""]),onClick:e=>F(a+12),style:_(L.value.requestData[a+12]?`background:url(${L.value.requestData[a+12].image}) no-repeat;background-size: 100% 100%;`:"")},null,14,["onClick"])):y("",!0)],2)],4),R.value[a+12]==e.index?(n(),o("div",{key:0,class:"bot_line"},p(null==(t=L.value.requestData[a+12])?void 0:t.name)+"·"+p(null==(l=L.value.requestData[a+12])?void 0:l.directionStr),1)):y("",!0),u("div",{class:"top_line"},p(e.key),1)],12,["id"])})),128))])],64))}},[["__scopeId","data-v-290bfa4a"]]),I=e({__name:"paizhen",setup(e){const s=a(100),r=a(0);a(null),a(!1),a([]);const i=l("tarotPaiZhen");return k((()=>{switch(r.value){case 0:return"抽牌";case 1:case 2:return"解牌"}})),t((()=>{let e=i.keywords.split(",");e.length>6&&e.length<=9?s.value=130:e.length>9&&e.length<=12?s.value=160:e.length>12&&e.length<=15&&(s.value=190)})),(e,a)=>{const t=x;return n(),m(t,{style:_("background-color: #333333; height: "+s.value+"%;")},{default:h((()=>[D(t,{class:"page_bg"},{default:h((()=>[D(X,{tarotData:q(i)},null,8,["tarotData"])])),_:1})])),_:1},8,["style"])}}},[["__scopeId","data-v-089571c2"]]);export{I as default};
