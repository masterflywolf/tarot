import{k as e,_ as t,l as i,g as s,X as n,p as a,j as o,M as l,a7 as c,a2 as u,N as r,G as d,a8 as p,s as g,a9 as h,aa as f,ab as m,o as v,c as k,w as L,f as b,d as I,C as y,e as O,t as _,q as x,O as S,v as w,P as A,i as T}from"./index-6d8df4d2.js";import{s as C,m as P}from"./store.682ebf55.js";function N(){var e=void 0;try{if("iOS"==plus.os.name){var t=0,i=plus.ios.invoke("UIApplication","sharedApplication"),s=plus.ios.invoke(i,"currentUserNotificationSettings");s?(t=s.plusGetAttribute("types"),plus.ios.deleteObject(s)):t=plus.ios.invoke(i,"enabledRemoteNotificationTypes"),plus.ios.deleteObject(i),e=0!=t}else{var n=plus.android.runtimeMainActivity(),a=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");e=plus.android.invoke(a,"isPushTurnedOn",n)}}catch(o){console.error("exception in isTurnedOnPush@dc-push!!")}return e}function R(){try{if("iOS"==plus.os.name){var e=plus.ios.invoke("UIApplication","sharedApplication"),t=plus.ios.invoke("NSURL","URLWithString:","app-settings:");plus.ios.invoke(e,"openURL:",t),plus.ios.deleteObject(t),plus.ios.deleteObject(e)}}catch(i){console.error("exception in settingInIos@dc-push!!")}}const j={isOn:N,iosSetting:R,on:function(){try{if("iOS"==plus.os.name)N()||R();else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOnPush",e)}}catch(i){console.error("exception in turnOnPush@dc-push!!")}},off:function(){try{if("iOS"==plus.os.name);else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOffPush",e)}}catch(i){console.error("exception in trunOffPush@dc-push!!")}},setting:function(){"ios"==e().platform&&R(),"android"==e().platform&&function(){if("android"==e().platform){var t=plus.android.runtimeMainActivity(),i=new(plus.android.importClass("android.content.Intent"))(plus.android.importClass("android.provider.Settings").ACTION_APPLICATION_DETAILS_SETTINGS);t.startActivity(i)}}()}};const E=t({data:()=>({pushServer:j,supportMode:[],pushIsOn:"wait",currentLanguage:"",userInfo:{}}),computed:{hasLogin:()=>C.hasLogin,i18nEnable:()=>i().globalData.config.i18n.enable},onLoad(){this.currentLanguage="en"==s("CURRENT_LANG")?"English":"简体中文",n({title:this.$t("settings.navigationBarTitle")})},onShow(){},methods:{privacy(e,t){a({url:"/pages/common/webview/webview?url="+e+"&title="+t})},deactivate(){a({url:"/uni_modules/uni-id-pages/pages/userinfo/deactivate/deactivate"})},async changeLoginState(){this.hasLogin?await P.logout():o({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"})},clearTmp(){l({title:this.$t("settings.clearing"),mask:!0}),c({success:e=>{e.fileList.length>0?u({filePath:e.fileList[0].filePath,complete:e=>{console.log(e),r(),d({title:this.$t("settings.clearedSuccessed"),icon:"none"})}}):(r(),d({title:this.$t("settings.clearedSuccessed"),icon:"none"}))},complete:e=>{console.log(e)}})},changeLanguage(){console.log("语言切换"),p({itemList:["English","简体中文"],success:e=>{console.log(e.tapIndex);let t=s("CURRENT_LANG");if(!e.tapIndex&&"zh-Hans"==t||e.tapIndex&&"en"==t){const s=i().globalData;t=s.locale="en"===t?"zh-Hans":"en",g("CURRENT_LANG",t),i().globalData.$i18n.locale=t,this.currentLanguage=e.tapIndex?"简体中文":"English",h&&h(t),f({url:"/pages/list/list",complete:()=>{m("changeLanguage",t)}})}},fail:()=>{},complete:()=>{}})}}},[["render",function(e,t,i,s,n,a){const o=x(w("uni-list-item"),S),l=x(w("uni-list"),A),c=T,u=b;return v(),k(u,{class:"content"},{default:L((()=>[I(l,{class:"mt10",border:!1},{default:L((()=>[I(o,{title:e.$t("settings.userInfo"),to:"/uni_modules/uni-id-pages/pages/userinfo/userinfo",link:"navigateTo"},null,8,["title"])])),_:1}),I(l,{class:"mt10",border:!1},{default:L((()=>[I(o,{onClick:t[0]||(t[0]=e=>a.privacy("https://www.hengxiuju.com/yinsi.php?url=塔罗星座元宇宙","隐私政策")),title:"隐私政策",link:"navigateTo"}),I(o,{onClick:t[1]||(t[1]=e=>a.privacy("https://www.hengxiuju.com/xieyi.php?url=塔罗星座元宇宙","用户服务协议")),title:"用户服务协议",link:"navigateTo"}),a.hasLogin?(v(),k(l,{key:0,class:"mt10",border:!1},{default:L((()=>[I(o,{onClick:a.deactivate,title:e.$t("settings.deactivate"),link:"navigateTo"},null,8,["onClick","title"])])),_:1})):y("",!0)])),_:1}),I(u,{class:"bottom-back",onClick:a.changeLoginState},{default:L((()=>[a.hasLogin?(v(),k(c,{key:0,class:"bottom-back-text"},{default:L((()=>[O(_(e.$t("settings.logOut")),1)])),_:1})):(v(),k(c,{key:1,class:"bottom-back-text"},{default:L((()=>[O(_(e.$t("settings.login")),1)])),_:1}))])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-8362fdaf"]]);export{E as default};
